# Smart Review System - GitHub Actionsçµ±åˆå®Ÿè£…è¨ˆç”»

**ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³:** 1.0.0
**ä½œæˆæ—¥:** 2025å¹´11æœˆ18æ—¥ (JST)
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:** è¨ˆç”»æ®µéšï¼ˆæœªå®Ÿè£…ï¼‰
**è‘—ä½œæ¨©:** (c) 2025 KEIEI.NET INC.
**ä½œæˆè€…:** KENJI OYAMA

---

## ğŸ“‹ ç›®æ¬¡

- [æ¦‚è¦](#æ¦‚è¦)
- [å®Ÿè£…å¯èƒ½æ€§](#å®Ÿè£…å¯èƒ½æ€§)
- [æŠ€è¡“è¦ä»¶](#æŠ€è¡“è¦ä»¶)
- [å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º](#å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º)
- [ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨­è¨ˆ](#ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨­è¨ˆ)
- [ã‚³ã‚¹ãƒˆè©¦ç®—](#ã‚³ã‚¹ãƒˆè©¦ç®—)
- [ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …](#ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …)
- [åˆ¶ç´„äº‹é …ãƒ»èª²é¡Œ](#åˆ¶ç´„äº‹é …èª²é¡Œ)
- [å®Ÿè£…æ‰‹é †](#å®Ÿè£…æ‰‹é †)
- [å‚è€ƒè³‡æ–™](#å‚è€ƒè³‡æ–™)

---

## æ¦‚è¦

Smart Review System Skillsã‚’GitHub Actionsã«çµ±åˆã—ã€CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§è‡ªå‹•ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’å®Ÿç¾ã™ã‚‹å®Ÿè£…è¨ˆç”»ã€‚

### ç›®çš„

1. **è‡ªå‹•åŒ–**: PRã‚ªãƒ¼ãƒ—ãƒ³æ™‚ã«4 Skillsã«ã‚ˆã‚‹åŒ…æ‹¬çš„ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’è‡ªå‹•å®Ÿè¡Œ
2. **å“è³ªä¿è¨¼**: ã™ã¹ã¦ã®ã‚³ãƒŸãƒƒãƒˆã§Skillsæ§‹é€ ã¨ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’æ¤œè¨¼
3. **ç¶™ç¶šçš„æ›´æ–°**: BugSearch3ãƒ«ãƒ¼ãƒ«ã®å®šæœŸçš„ãªè‡ªå‹•æ›´æ–°
4. **ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–**: `@claude`ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹å¯¾è©±çš„ãƒ¬ãƒ“ãƒ¥ãƒ¼

### å¯¾è±¡èª­è€…

- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†è€…
- CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æ§‹ç¯‰æ‹…å½“è€…
- å°†æ¥ã®å®Ÿè£…æ‹…å½“è€…

---

## å®Ÿè£…å¯èƒ½æ€§

### âœ… çµè«–: æ¡ä»¶ä»˜ãå¯èƒ½

GitHub Actionsã§Smart Review System Skillsã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯**æŠ€è¡“çš„ã«å¯èƒ½**ã§ã™ã€‚

### æ ¹æ‹ 

1. **å…¬å¼ã‚µãƒãƒ¼ãƒˆ**: Claude Code CLIã¯GitHub Actionsã‚’å…¬å¼ã«ã‚µãƒãƒ¼ãƒˆï¼ˆ2025å¹´ç¾åœ¨ï¼‰
2. **æ—¢å­˜äº‹ä¾‹**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã«æ—¢ã«CI/CDé–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå­˜åœ¨
   - `TODO.md` - GitHub Actionsãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ä½œæˆã‚¿ã‚¹ã‚¯
   - `COMPATIBILITY.md` - Validate Skillsä¾‹
   - `docs/BUGSEARCH3-INTEGRATION-GUIDE.md` - ãƒ«ãƒ¼ãƒ«æ›´æ–°ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ä¾‹
3. **å®Ÿè¨¼æ¸ˆã¿**: Anthropicå…¬å¼ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ `anthropics/claude-code-action@v1` ãŒåˆ©ç”¨å¯èƒ½

### æ¡ä»¶

- Anthropic API Keyï¼ˆæœ‰åŠ¹ãªã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- GitHubãƒªãƒã‚¸ãƒˆãƒªç®¡ç†è€…æ¨©é™ï¼ˆGitHubã‚¢ãƒ—ãƒªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼‰
- é©åˆ‡ãªã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãƒ»æ¨©é™è¨­å®š

---

## æŠ€è¡“è¦ä»¶

### å¿…é ˆè¦ä»¶

| é …ç›® | è¦ä»¶ | å‚™è€ƒ |
|------|------|------|
| **GitHubãƒªãƒã‚¸ãƒˆãƒª** | public/privateä¸¡æ–¹å¯¾å¿œ | - |
| **Anthropic API Key** | æœ‰åŠ¹ãªAPIã‚­ãƒ¼ | ãƒ•ã‚§ãƒ¼ã‚º2-4ã§å¿…é ˆ |
| **ãƒªãƒã‚¸ãƒˆãƒªæ¨©é™** | ç®¡ç†è€…æ¨©é™ | GitHubã‚¢ãƒ—ãƒªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã«å¿…è¦ |
| **Claude Code CLI** | v1.0ä»¥ä¸Š | æœ€æ–°ç‰ˆæ¨å¥¨ |

### æ¨å¥¨è¦ä»¶

| é …ç›® | è¦ä»¶ | ç†ç”± |
|------|------|------|
| **ãƒ¢ãƒ‡ãƒ«** | Sonnet 4.5ä»¥ä¸Š | é«˜ç²¾åº¦åˆ†æã®ãŸã‚ |
| **Git LFS** | å°å…¥ | å¤§é‡ã®ãƒ«ãƒ¼ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ |
| **PowerShell** | 7.0ä»¥ä¸Š | Windowsãƒ©ãƒ³ãƒŠãƒ¼ä½¿ç”¨æ™‚ |

### å¯¾å¿œç’°å¢ƒ

| ãƒ©ãƒ³ãƒŠãƒ¼ | å¯¾å¿œçŠ¶æ³ | å‚™è€ƒ |
|---------|---------|------|
| `ubuntu-latest` | âœ… æ¨å¥¨ | æœ€é€Ÿãƒ»æœ€å®‰å®š |
| `windows-latest` | âœ… å¯¾å¿œ | PowerShellå¿…é ˆ |
| `macos-latest` | âœ… å¯¾å¿œ | - |

---

## å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º

### ãƒ•ã‚§ãƒ¼ã‚º1: åŸºæœ¬æ¤œè¨¼ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã€æœ€å„ªå…ˆãƒ»æ¨å¥¨ã€‘

**å·¥æ•°:** 1æ™‚é–“
**ã‚³ã‚¹ãƒˆ:** ç„¡æ–™ï¼ˆPublicï¼‰/ ç„¡æ–™æ å†…ï¼ˆPrivateï¼‰
**ä¾å­˜:** ãªã—

#### å®Ÿè£…å†…å®¹

- **ãƒ•ã‚¡ã‚¤ãƒ«:** `.github/workflows/validate.yml`
- **æ©Ÿèƒ½:**
  - Skillsæ§‹é€ æ¤œè¨¼ï¼ˆ`validate-skills.ps1`ï¼‰
  - ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒã‚§ãƒƒã‚¯ï¼ˆ`check-encoding.ps1`ï¼‰
  - JSONæ§‹æ–‡ãƒã‚§ãƒƒã‚¯ï¼ˆ`patterns.json`, `cwe-mapping.json`ãªã©ï¼‰
- **ãƒˆãƒªã‚¬ãƒ¼:** `push`, `pull_request`

#### æœŸå¾…ã•ã‚Œã‚‹æˆæœ

- ã™ã¹ã¦ã®ã‚³ãƒŸãƒƒãƒˆã§Skillsæ§‹é€ ã®æ•´åˆæ€§ã‚’è‡ªå‹•æ¤œè¨¼
- UTF-8ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°é•åã‚’å³åº§ã«æ¤œå‡º
- JSONæ§‹æ–‡ã‚¨ãƒ©ãƒ¼ã‚’æ—©æœŸç™ºè¦‹

---

### ãƒ•ã‚§ãƒ¼ã‚º2: ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€æ¨å¥¨ã€‘

**å·¥æ•°:** 30åˆ†
**ã‚³ã‚¹ãƒˆ:** ä½¿ç”¨æ™‚ã®ã¿ï¼ˆ$0.05-0.20/ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‰
**ä¾å­˜:** Anthropic API Key

#### å®Ÿè£…å†…å®¹

- **ãƒ•ã‚¡ã‚¤ãƒ«:** `.github/workflows/claude-interactive.yml`
- **æ©Ÿèƒ½:**
  - `@claude`ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã§Skillsèµ·å‹•
  - PR/Issueã‚³ãƒ¡ãƒ³ãƒˆã§å¯¾è©±çš„ãƒ¬ãƒ“ãƒ¥ãƒ¼
  - 4 Skillsï¼ˆSecurity/Debug/Quality/Docsï¼‰ã‚’è‡ªç„¶æ–‡ã§æŒ‡å®šå¯èƒ½
- **ãƒˆãƒªã‚¬ãƒ¼:** `issue_comment`, `pull_request_review_comment`

#### æœŸå¾…ã•ã‚Œã‚‹æˆæœ

- ãƒ¬ãƒ“ãƒ¥ãƒ¼å¯¾è±¡ã‚’æŸ”è»Ÿã«æŒ‡å®šå¯èƒ½
- å¯¾è©±çš„ãªã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ä½“é¨“
- å¿…è¦ãªæ™‚ã ã‘APIã‚³ã‚¹ãƒˆãŒç™ºç”Ÿï¼ˆã‚³ã‚¹ãƒˆåŠ¹ç‡çš„ï¼‰

#### ä½¿ç”¨ä¾‹

```
# PRã‚³ãƒ¡ãƒ³ãƒˆã§ä½¿ç”¨
@claude ã“ã®PRã‚’åŒ…æ‹¬çš„ã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ãã ã•ã„

# ç‰¹å®šã®Skillã®ã¿å®Ÿè¡Œ
@claude ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åˆ†æã‚’ãŠé¡˜ã„ã—ã¾ã™
@claude test/auth.js ã®ãƒã‚°ã‚’æ¤œå‡ºã—ã¦ãã ã•ã„
```

---

### ãƒ•ã‚§ãƒ¼ã‚º3: PRè‡ªå‹•ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€‘

**å·¥æ•°:** 1-2æ™‚é–“
**ã‚³ã‚¹ãƒˆ:** PR 1å›ã‚ãŸã‚Š$0.05-0.20
**ä¾å­˜:** Anthropic API Key

#### å®Ÿè£…å†…å®¹

- **ãƒ•ã‚¡ã‚¤ãƒ«:** `.github/workflows/smart-review-pr.yml`
- **æ©Ÿèƒ½:**
  - PRã‚ªãƒ¼ãƒ—ãƒ³æ™‚ã«4 Skillsã‚’è‡ªå‹•å®Ÿè¡Œ
  - çµæœã‚’PRã‚³ãƒ¡ãƒ³ãƒˆã«æŠ•ç¨¿
  - Security â†’ Debug â†’ Quality â†’ Docs ã®é †ã§å®Ÿè¡Œ
  - å„Skillã®çµæœã‚’Markdownå½¢å¼ã§æ•´å½¢
- **ãƒˆãƒªã‚¬ãƒ¼:** `pull_request` (types: `[opened, synchronize]`)

#### æœŸå¾…ã•ã‚Œã‚‹æˆæœ

- å®Œå…¨è‡ªå‹•åŒ–ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼
- ä¸€è²«ã—ãŸãƒ¬ãƒ“ãƒ¥ãƒ¼å“è³ª
- ãƒ¬ãƒ“ãƒ¥ãƒ¼å¾…æ©Ÿæ™‚é–“ã®å‰Šæ¸›

#### æ³¨æ„äº‹é …

- **ã‚³ã‚¹ãƒˆ**: ã™ã¹ã¦ã®PRã§å®Ÿè¡Œã•ã‚Œã‚‹ãŸã‚ã€æœˆé–“ã‚³ã‚¹ãƒˆãŒå¢—åŠ 
- **æ™‚é–“**: 1 PRã‚ãŸã‚Š2-5åˆ†ã®å®Ÿè¡Œæ™‚é–“
- **æ¨å¥¨**: å¤§è¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚„é »ç¹ãªPRãŒã‚ã‚‹å ´åˆã¯ã€ãƒ•ã‚§ãƒ¼ã‚º2ï¼ˆã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ï¼‰ã‚’å„ªå…ˆ

---

### ãƒ•ã‚§ãƒ¼ã‚º4: BugSearch3ãƒ«ãƒ¼ãƒ«å®šæœŸæ›´æ–°ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€‘

**å·¥æ•°:** 1æ™‚é–“
**ã‚³ã‚¹ãƒˆ:** æœˆ1å›å®Ÿè¡Œï¼ˆç„¡æ–™æ å†…ï¼‰
**ä¾å­˜:** ãªã—

#### å®Ÿè£…å†…å®¹

- **ãƒ•ã‚¡ã‚¤ãƒ«:** `.github/workflows/update-bugsearch3.yml`
- **æ©Ÿèƒ½:**
  - æœˆæ¬¡ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã§BugSearch3ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
  - `tools/convert-bugsearch3-rules.ps1`ï¼ˆã¾ãŸã¯`.py`ï¼‰ã‚’å®Ÿè¡Œ
  - å¤‰æ›´ãŒã‚ã‚Œã°è‡ªå‹•çš„ã«PRä½œæˆ
- **ãƒˆãƒªã‚¬ãƒ¼:** `schedule` (cron: `0 0 1 * *` - æ¯æœˆ1æ—¥)

#### æœŸå¾…ã•ã‚Œã‚‹æˆæœ

- BugSearch3ã®æœ€æ–°ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ã‚’è‡ªå‹•åæ˜ 
- æ‰‹å‹•æ›´æ–°ä½œæ¥­ã®å‰Šæ¸›
- ãƒ«ãƒ¼ãƒ«æ›´æ–°ã®è¿½è·¡å¯èƒ½æ€§ï¼ˆPRçµŒç”±ï¼‰

---

## ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨­è¨ˆ

### ãƒ•ã‚§ãƒ¼ã‚º1: validate.yml

```yaml
name: Validate Skills

on:
  push:
    branches: ['**']
  pull_request:
    branches: ['main', 'develop']

jobs:
  validate:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Setup PowerShell
        shell: pwsh
        run: |
          $PSVersionTable.PSVersion

      - name: Validate Skills Structure
        shell: pwsh
        run: |
          if (Test-Path "validate-skills.ps1") {
            ./validate-skills.ps1
          } else {
            Write-Host "validate-skills.ps1 not found, skipping..."
          }

      - name: Check Encoding
        shell: pwsh
        run: |
          if (Test-Path "check-encoding.ps1") {
            ./check-encoding.ps1
          } else {
            Write-Host "check-encoding.ps1 not found, skipping..."
          }

      - name: Validate JSON Files
        shell: pwsh
        run: |
          Get-ChildItem -Path ".claude/skills" -Recurse -Filter "*.json" | ForEach-Object {
            Write-Host "Validating $($_.FullName)..."
            $content = Get-Content $_.FullName -Raw
            try {
              $content | ConvertFrom-Json | Out-Null
              Write-Host "âœ… $($_.Name) is valid JSON"
            } catch {
              Write-Error "âŒ $($_.Name) is invalid JSON: $_"
              exit 1
            }
          }
```

**ç‰¹å¾´:**
- PowerShellã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å­˜åœ¨ãƒã‚§ãƒƒã‚¯ï¼ˆæŸ”è»Ÿæ€§ï¼‰
- JSONæ§‹æ–‡æ¤œè¨¼ã‚’ç›´æ¥å®Ÿè¡Œ
- ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œï¼ˆ`pwsh`ä½¿ç”¨ï¼‰

---

### ãƒ•ã‚§ãƒ¼ã‚º2: claude-interactive.yml

```yaml
name: Claude Interactive Review

on:
  issue_comment:
    types: [created]
  pull_request_review_comment:
    types: [created]

jobs:
  claude-interactive:
    # @claudeãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ãŒã‚ã‚‹å ´åˆã®ã¿å®Ÿè¡Œ
    if: contains(github.event.comment.body, '@claude')

    runs-on: ubuntu-latest

    permissions:
      contents: write
      pull-requests: write
      issues: write

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Install Skills globally
        run: |
          mkdir -p ~/.claude/skills
          cp -r .claude/skills/* ~/.claude/skills/

      - name: Run Claude Code
        uses: anthropics/claude-code-action@v1
        with:
          anthropic_api_key: ${{ secrets.ANTHROPIC_API_KEY }}
```

**ç‰¹å¾´:**
- `@claude`ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã§ã®ã¿å®Ÿè¡Œï¼ˆã‚³ã‚¹ãƒˆæœ€é©åŒ–ï¼‰
- Skillsã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚³ãƒ”ãƒ¼
- å…¬å¼ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ä½¿ç”¨

---

### ãƒ•ã‚§ãƒ¼ã‚º3: smart-review-pr.yml

```yaml
name: Smart Review - PR Auto Review

on:
  pull_request:
    types: [opened, synchronize]

jobs:
  smart-review:
    runs-on: ubuntu-latest

    permissions:
      contents: read
      pull-requests: write

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Install Skills globally
        run: |
          mkdir -p ~/.claude/skills
          cp -r .claude/skills/* ~/.claude/skills/

      - name: Run Smart Review
        uses: anthropics/claude-code-action@v1
        with:
          anthropic_api_key: ${{ secrets.ANTHROPIC_API_KEY }}
          prompt: |
            ã“ã®PRã‚’åŒ…æ‹¬çš„ã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ãã ã•ã„ã€‚

            ä»¥ä¸‹ã®4ã¤ã®è¦³ç‚¹ã‹ã‚‰åˆ†æã—ã€çµæœã‚’Markdownå½¢å¼ã§æ•´ç†ã—ã¦ãã ã•ã„ï¼š
            1. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ï¼ˆsmart-review-securityï¼‰
            2. ãƒã‚°ãƒ»ãƒ­ã‚¸ãƒƒã‚¯ã‚¨ãƒ©ãƒ¼ï¼ˆsmart-review-debugï¼‰
            3. ã‚³ãƒ¼ãƒ‰å“è³ªï¼ˆsmart-review-qualityï¼‰
            4. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆsmart-review-docsï¼‰

            å„Skillã®çµæœã‚’ä»¥ä¸‹ã®å½¢å¼ã§å ±å‘Šï¼š

            ## [Skillå] ãƒ¬ãƒ“ãƒ¥ãƒ¼çµæœ

            **æ¤œå‡ºã•ã‚ŒãŸå•é¡Œæ•°:** Xä»¶

            ### å•é¡Œè©³ç´°

            - **[å„ªå…ˆåº¦]** ãƒ•ã‚¡ã‚¤ãƒ«å:è¡Œç•ªå· - å•é¡Œã®èª¬æ˜
              - æ¨å¥¨ä¿®æ­£: ...
          claude_args: "--max-turns 5"
```

**ç‰¹å¾´:**
- æ§‹é€ åŒ–ã•ã‚ŒãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼ˆä¸€è²«ã—ãŸå‡ºåŠ›å½¢å¼ï¼‰
- `--max-turns`ã§ã‚³ã‚¹ãƒˆåˆ¶å¾¡
- PRã‚³ãƒ¡ãƒ³ãƒˆã«è‡ªå‹•æŠ•ç¨¿

---

### ãƒ•ã‚§ãƒ¼ã‚º4: update-bugsearch3.yml

```yaml
name: Update BugSearch3 Rules

on:
  schedule:
    - cron: '0 0 1 * *'  # æ¯æœˆ1æ—¥ 00:00 UTC
  workflow_dispatch:  # æ‰‹å‹•å®Ÿè¡Œã‚‚å¯èƒ½

jobs:
  update-rules:
    runs-on: ubuntu-latest

    permissions:
      contents: write
      pull-requests: write

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Clone BugSearch3
        run: |
          git clone https://github.com/KEIEI-NET/BugSearch3.git

      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: Install dependencies
        run: |
          pip install pyyaml

      - name: Convert Rules
        run: |
          python tools/convert-yaml-simple.py BugSearch3/services/analysis-service-go/rules

      - name: Check for changes
        id: changes
        run: |
          if [[ -n $(git status --porcelain) ]]; then
            echo "has_changes=true" >> $GITHUB_OUTPUT
          else
            echo "has_changes=false" >> $GITHUB_OUTPUT
          fi

      - name: Create Pull Request
        if: steps.changes.outputs.has_changes == 'true'
        env:
          GH_TOKEN: ${{ github.token }}
        run: |
          git config user.name github-actions
          git config user.email github-actions@github.com

          BRANCH_NAME="update-bugsearch3-rules-$(date +%Y%m%d)"
          git checkout -b "$BRANCH_NAME"

          git add .claude/skills/*/rules-bugsearch3/
          git commit -m "chore: Update BugSearch3 rules (automated)"
          git push origin "$BRANCH_NAME"

          gh pr create \
            --title "Update BugSearch3 rules ($(date +%Y-%m-%d))" \
            --body "Automated update from BugSearch3 repository.

          **Updated rules:**
          $(git diff --name-only HEAD~1 HEAD | grep rules-bugsearch3)

          **Review checklist:**
          - [ ] Verify rule syntax
          - [ ] Test with sample code
          - [ ] Check for breaking changes" \
            --label "automated,dependencies"
```

**ç‰¹å¾´:**
- `workflow_dispatch`ã§æ‰‹å‹•å®Ÿè¡Œã‚‚å¯èƒ½
- å¤‰æ›´æ¤œå‡ºãƒ­ã‚¸ãƒƒã‚¯ï¼ˆç„¡é§„ãªPRä½œæˆã‚’é˜²æ­¢ï¼‰
- PRæœ¬æ–‡ã«å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•ãƒªã‚¹ãƒˆåŒ–

---

## èªè¨¼ãƒ»ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç®¡ç†

### å¿…é ˆã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ

| ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆå | ç”¨é€” | å¿…é ˆãƒ•ã‚§ãƒ¼ã‚º | å–å¾—æ–¹æ³• |
|--------------|------|------------|---------|
| `ANTHROPIC_API_KEY` | Claude APIã‚¢ã‚¯ã‚»ã‚¹ | ãƒ•ã‚§ãƒ¼ã‚º2-3 | https://console.anthropic.com/ |
| `GITHUB_TOKEN` | PRä½œæˆã€ã‚³ãƒŸãƒƒãƒˆæ¨©é™ | ãƒ•ã‚§ãƒ¼ã‚º4 | è‡ªå‹•æä¾›ï¼ˆ`github.token`ï¼‰ |

### ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆè¨­å®šæ‰‹é †

1. GitHubãƒªãƒã‚¸ãƒˆãƒªãƒšãƒ¼ã‚¸ã‚’é–‹ã
2. **Settings** â†’ **Secrets and variables** â†’ **Actions**
3. **New repository secret** ã‚’ã‚¯ãƒªãƒƒã‚¯
4. Name: `ANTHROPIC_API_KEY`
5. Secret: APIã‚­ãƒ¼ã‚’è²¼ã‚Šä»˜ã‘
6. **Add secret** ã‚’ã‚¯ãƒªãƒƒã‚¯

### æ¨©é™è¨­å®š

å„ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§å¿…è¦ãªæ¨©é™ï¼š

```yaml
permissions:
  contents: write        # ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´ã€ãƒ–ãƒ©ãƒ³ãƒä½œæˆ
  pull-requests: write   # PRä½œæˆãƒ»ã‚³ãƒ¡ãƒ³ãƒˆ
  issues: write          # Issueå¯¾å¿œï¼ˆãƒ•ã‚§ãƒ¼ã‚º2ã®ã¿ï¼‰
```

**æœ€å°æ¨©é™åŸå‰‡**: å„ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§å¿…è¦æœ€å°é™ã®æ¨©é™ã®ã¿ã‚’ä»˜ä¸

---

## ã‚³ã‚¹ãƒˆè©¦ç®—

### GitHub Actions

| ãƒªãƒã‚¸ãƒˆãƒªç¨®é¡ | ç„¡æ–™æ  | è¶…éæ–™é‡‘ |
|--------------|--------|---------|
| Public | ç„¡åˆ¶é™ | ç„¡æ–™ |
| Privateï¼ˆFreeï¼‰ | 2,000åˆ†/æœˆ | $0.008/åˆ† |
| Privateï¼ˆProï¼‰ | 3,000åˆ†/æœˆ | $0.008/åˆ† |
| Privateï¼ˆTeamï¼‰ | 3,000åˆ†/æœˆ | $0.008/åˆ† |
| Privateï¼ˆEnterpriseï¼‰ | 50,000åˆ†/æœˆ | $0.008/åˆ† |

### Claude API

| ãƒ¢ãƒ‡ãƒ« | å…¥åŠ›ãƒˆãƒ¼ã‚¯ãƒ³å˜ä¾¡ | å‡ºåŠ›ãƒˆãƒ¼ã‚¯ãƒ³å˜ä¾¡ | 1ãƒ¬ãƒ“ãƒ¥ãƒ¼æƒ³å®šã‚³ã‚¹ãƒˆ |
|-------|---------------|----------------|------------------|
| Claude Sonnet 4.5 | $3/1M tokens | $15/1M tokens | $0.05-0.20 |
| Claude Opus 4 | $15/1M tokens | $75/1M tokens | $0.25-1.00 |

### æœˆé–“ã‚³ã‚¹ãƒˆä¾‹

#### ã‚·ãƒŠãƒªã‚ª1: Publicãƒªãƒã‚¸ãƒˆãƒªã€æœˆ50 PRã€ãƒ•ã‚§ãƒ¼ã‚º1+2
- GitHub Actions: **$0**ï¼ˆç„¡åˆ¶é™ï¼‰
- Claude API: $2.50-10.00ï¼ˆã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¬ãƒ“ãƒ¥ãƒ¼ åŠæ•°ã®PRã§ä½¿ç”¨ï¼‰
- **åˆè¨ˆ: $2.50-10.00**

#### ã‚·ãƒŠãƒªã‚ª2: Privateãƒªãƒã‚¸ãƒˆãƒªã€æœˆ50 PRã€ãƒ•ã‚§ãƒ¼ã‚º1+3
- GitHub Actions: $0-5ï¼ˆç„¡æ–™æ å†…ã§åã¾ã‚‹å¯èƒ½æ€§é«˜ï¼‰
- Claude API: $2.50-10.00ï¼ˆå…¨PRã§è‡ªå‹•ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‰
- **åˆè¨ˆ: $2.50-15.00**

#### ã‚·ãƒŠãƒªã‚ª3: Privateãƒªãƒã‚¸ãƒˆãƒªã€æœˆ100 PRã€å…¨ãƒ•ã‚§ãƒ¼ã‚º
- GitHub Actions: $5-10
- Claude API: $10.00-30.00
- **åˆè¨ˆ: $15.00-40.00**

### ã‚³ã‚¹ãƒˆæœ€é©åŒ–æˆ¦ç•¥

1. **ãƒ•ã‚§ãƒ¼ã‚º2ï¼ˆã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ï¼‰ã‚’å„ªå…ˆ**: å¿…è¦ãªæ™‚ã ã‘å®Ÿè¡Œ
2. **`--max-turns`åˆ¶é™**: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§`claude_args: "--max-turns 3"`ã‚’è¨­å®š
3. **ç‰¹å®šãƒ–ãƒ©ãƒ³ãƒã®ã¿**: `main`, `develop`ã¸ã®PRã®ã¿è‡ªå‹•ãƒ¬ãƒ“ãƒ¥ãƒ¼
4. **ãƒ•ã‚¡ã‚¤ãƒ«ãƒ•ã‚£ãƒ«ã‚¿**: é‡è¦ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ`src/**/*.js`ãªã©ï¼‰ã®ã¿å¯¾è±¡

---

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …

### 1. ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç®¡ç†

#### âŒ çµ¶å¯¾ã«é¿ã‘ã‚‹ã“ã¨
```yaml
# æ‚ªã„ä¾‹: APIã‚­ãƒ¼ã‚’ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰
env:
  ANTHROPIC_API_KEY: "sk-ant-api03-..."  # çµ¶å¯¾ãƒ€ãƒ¡ï¼
```

#### âœ… æ¨å¥¨æ–¹æ³•
```yaml
# è‰¯ã„ä¾‹: GitHub Secretsã‚’ä½¿ç”¨
env:
  ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
```

### 2. ãƒ­ã‚°ã¸ã®éœ²å‡ºé˜²æ­¢

```yaml
- name: Mask sensitive data
  run: |
    echo "::add-mask::${{ secrets.ANTHROPIC_API_KEY }}"
```

### 3. æœ€å°æ¨©é™åŸå‰‡

```yaml
permissions:
  contents: read  # èª­ã¿å–ã‚Šã®ã¿ã§ååˆ†ãªå ´åˆ
```

### 4. å¤–éƒ¨ä¾å­˜ã®æ¤œè¨¼

```yaml
- name: Verify BugSearch3 repository
  run: |
    # ä¿¡é ¼ã§ãã‚‹ã‚½ãƒ¼ã‚¹ã‹ã‚‰ã®ã¿ã‚¯ãƒ­ãƒ¼ãƒ³
    if [[ "$BUGSEARCH3_REPO" != "https://github.com/KEIEI-NET/BugSearch3.git" ]]; then
      echo "Untrusted repository"
      exit 1
    fi
```

### 5. ãƒ•ã‚©ãƒ¼ã‚¯ã‹ã‚‰ã®PRå¯¾ç­–

```yaml
# ãƒ•ã‚©ãƒ¼ã‚¯ã‹ã‚‰ã®PRã§ã¯ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’ä½¿ç”¨ã—ãªã„
if: github.event.pull_request.head.repo.full_name == github.repository
```

---

## åˆ¶ç´„äº‹é …ãƒ»èª²é¡Œ

### æ—¢çŸ¥ã®åˆ¶ç´„

#### 1. APIåˆ¶é™
- **Claude API**: ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã‚ã‚Šï¼ˆTierä¾å­˜ï¼‰
- **å›é¿ç­–**: `--max-turns`åˆ¶é™ã€ãƒªãƒˆãƒ©ã‚¤ãƒ­ã‚¸ãƒƒã‚¯

#### 2. å®Ÿè¡Œæ™‚é–“
- **GitHub Actions**: ã‚¸ãƒ§ãƒ–ã‚ãŸã‚Šæœ€å¤§6æ™‚é–“
- **é€šå¸¸**: 1ãƒ¬ãƒ“ãƒ¥ãƒ¼ 2-5åˆ†ï¼ˆå¤§è¦æ¨¡ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã§ã¯10-15åˆ†ï¼‰

#### 3. ä¸¦è¡Œå®Ÿè¡Œ
- **åˆ¶é™**: åŒæ™‚å®Ÿè¡Œã‚¸ãƒ§ãƒ–æ•°ï¼ˆPlanã«ã‚ˆã‚‹ï¼‰
- **å½±éŸ¿**: è¤‡æ•°PRåŒæ™‚ã‚ªãƒ¼ãƒ—ãƒ³æ™‚ã«å¾…æ©Ÿç™ºç”Ÿ

### Smart Review Systemå›ºæœ‰ã®èª²é¡Œ

#### 1. Skillsèªè­˜

**å•é¡Œ**: GitHub Actionsãƒ©ãƒ³ãƒŠãƒ¼ä¸Šã§SkillsãŒè‡ªå‹•èª­ã¿è¾¼ã¿ã•ã‚Œãªã„

**è§£æ±ºç­–**:
```yaml
- name: Install Skills globally
  run: |
    mkdir -p ~/.claude/skills
    cp -r .claude/skills/* ~/.claude/skills/
```

#### 2. ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°

**å•é¡Œ**: PowerShellã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆUTF-8 with BOMï¼‰ã¨Skills MDï¼ˆUTF-8 without BOMï¼‰ã®æ··åœ¨

**ç¾çŠ¶**: `.gitattributes`ã§åˆ¶å¾¡æ¸ˆã¿ã€å•é¡Œãªã—

#### 3. ãƒ‘ã‚¹åŒºåˆ‡ã‚Š

**å•é¡Œ**: Windows `\` vs Linux/macOS `/`

**è§£æ±ºç­–**: Skillså†…ã§å¸¸ã« `/` ã‚’ä½¿ç”¨ï¼ˆç¾åœ¨å¯¾å¿œæ¸ˆã¿ï¼‰

#### 4. BugSearch3æ›´æ–°ã®å®‰å…¨æ€§

**å•é¡Œ**: ä¸Šæµãƒªãƒã‚¸ãƒˆãƒªã®å¤‰æ›´ã‚’è‡ªå‹•çš„ã«å–ã‚Šè¾¼ã‚€ãƒªã‚¹ã‚¯

**è§£æ±ºç­–**:
- PRçµŒç”±ã§å–ã‚Šè¾¼ã¿ï¼ˆå³åº§ã«mainã¸ãƒãƒ¼ã‚¸ã—ãªã„ï¼‰
- ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹ã‚’å¿…é ˆåŒ–

---

## å®Ÿè£…æ‰‹é †

### ã‚¹ãƒ†ãƒƒãƒ—1: äº‹å‰æº–å‚™ï¼ˆ15åˆ†ï¼‰

#### 1.1 Anthropic API Keyå–å¾—ï¼ˆãƒ•ã‚§ãƒ¼ã‚º2-3ã§å¿…é ˆï¼‰

```bash
# 1. https://console.anthropic.com/ ã«ã‚¢ã‚¯ã‚»ã‚¹
# 2. API Keys â†’ Create Key
# 3. ã‚­ãƒ¼ã‚’ã‚³ãƒ”ãƒ¼ï¼ˆä¸€åº¦ã—ã‹è¡¨ç¤ºã•ã‚Œãªã„ï¼‰
```

#### 1.2 GitHubã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆè¨­å®š

```bash
# 1. GitHubãƒªãƒã‚¸ãƒˆãƒªãƒšãƒ¼ã‚¸ã‚’é–‹ã
# 2. Settings â†’ Secrets and variables â†’ Actions
# 3. New repository secret
# 4. Name: ANTHROPIC_API_KEY
# 5. Secret: å–å¾—ã—ãŸAPIã‚­ãƒ¼ã‚’è²¼ã‚Šä»˜ã‘
```

---

### ã‚¹ãƒ†ãƒƒãƒ—2: ãƒ•ã‚§ãƒ¼ã‚º1å®Ÿè£…ï¼ˆ1æ™‚é–“ï¼‰

#### 2.1 ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ

```bash
mkdir -p .github/workflows
```

#### 2.2 ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ

**ãƒ•ã‚¡ã‚¤ãƒ«:** `.github/workflows/validate.yml`

```yaml
# ä¸Šè¨˜ã€Œãƒ•ã‚§ãƒ¼ã‚º1: validate.ymlã€ã®å†…å®¹ã‚’ã‚³ãƒ”ãƒ¼
```

#### 2.3 å‹•ä½œç¢ºèª

```bash
git add .github/workflows/validate.yml
git commit -m "ci: Add Skills validation workflow"
git push origin main

# GitHub Actionsã‚¿ãƒ–ã§Workflowã®å®Ÿè¡Œã‚’ç¢ºèª
```

---

### ã‚¹ãƒ†ãƒƒãƒ—3: ãƒ•ã‚§ãƒ¼ã‚º2å®Ÿè£…ï¼ˆ30åˆ†ï¼‰

#### 3.1 GitHubã‚¢ãƒ—ãƒªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæ¨å¥¨ï¼‰

**æ–¹æ³•A: Claude CLIçµŒç”±ï¼ˆæ¨å¥¨ï¼‰**
```bash
claude
> /install-github-app
```

**æ–¹æ³•B: æ‰‹å‹•**
```bash
# 1. https://github.com/apps/claude ã«ã‚¢ã‚¯ã‚»ã‚¹
# 2. Install
# 3. ãƒªãƒã‚¸ãƒˆãƒªã‚’é¸æŠ
# 4. Installå®Œäº†
```

#### 3.2 ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ

**ãƒ•ã‚¡ã‚¤ãƒ«:** `.github/workflows/claude-interactive.yml`

```yaml
# ä¸Šè¨˜ã€Œãƒ•ã‚§ãƒ¼ã‚º2: claude-interactive.ymlã€ã®å†…å®¹ã‚’ã‚³ãƒ”ãƒ¼
```

#### 3.3 å‹•ä½œç¢ºèª

```bash
# 1. ãƒ†ã‚¹ãƒˆPRã‚’ä½œæˆ
git checkout -b test-interactive-review
echo "test" > test.txt
git add test.txt
git commit -m "test: Interactive review"
git push origin test-interactive-review
gh pr create --title "Test Interactive Review" --body "Testing @claude integration"

# 2. PRã‚³ãƒ¡ãƒ³ãƒˆã§å®Ÿè¡Œ
# PRãƒšãƒ¼ã‚¸ã§ä»¥ä¸‹ã‚’ã‚³ãƒ¡ãƒ³ãƒˆ:
# @claude ã“ã®PRã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ãã ã•ã„

# 3. Claudeã®å¿œç­”ã‚’ç¢ºèª
```

---

### ã‚¹ãƒ†ãƒƒãƒ—4: ãƒ•ã‚§ãƒ¼ã‚º3å®Ÿè£…ï¼ˆ1-2æ™‚é–“ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

#### 4.1 ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ

**ãƒ•ã‚¡ã‚¤ãƒ«:** `.github/workflows/smart-review-pr.yml`

```yaml
# ä¸Šè¨˜ã€Œãƒ•ã‚§ãƒ¼ã‚º3: smart-review-pr.ymlã€ã®å†…å®¹ã‚’ã‚³ãƒ”ãƒ¼
```

#### 4.2 å‹•ä½œç¢ºèª

```bash
# ãƒ†ã‚¹ãƒˆPRã‚’ä½œæˆï¼ˆè‡ªå‹•çš„ã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒå®Ÿè¡Œã•ã‚Œã‚‹ï¼‰
git checkout -b test-auto-review
echo "test auto review" > test-auto.txt
git add test-auto.txt
git commit -m "test: Auto review"
git push origin test-auto-review
gh pr create --title "Test Auto Review" --body "Testing automatic review"

# PRãƒšãƒ¼ã‚¸ã§ã‚³ãƒ¡ãƒ³ãƒˆã‚’ç¢ºèª
```

---

### ã‚¹ãƒ†ãƒƒãƒ—5: ãƒ•ã‚§ãƒ¼ã‚º4å®Ÿè£…ï¼ˆ1æ™‚é–“ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

#### 5.1 å¤‰æ›ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ç¢ºèª

```bash
# Pythonç‰ˆã®å­˜åœ¨ç¢ºèª
ls -la tools/convert-yaml-simple.py

# ã¾ãŸã¯ PowerShellç‰ˆ
ls -la tools/convert-bugsearch3-rules.ps1
```

#### 5.2 ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ

**ãƒ•ã‚¡ã‚¤ãƒ«:** `.github/workflows/update-bugsearch3.yml`

```yaml
# ä¸Šè¨˜ã€Œãƒ•ã‚§ãƒ¼ã‚º4: update-bugsearch3.ymlã€ã®å†…å®¹ã‚’ã‚³ãƒ”ãƒ¼
```

#### 5.3 æ‰‹å‹•å®Ÿè¡Œãƒ†ã‚¹ãƒˆ

```bash
# GitHub Actions â†’ update-bugsearch3.yml â†’ Run workflow
# ã€ŒRun workflowã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦æ‰‹å‹•å®Ÿè¡Œ

# å®Ÿè¡Œçµæœã‚’ç¢ºèª:
# - PRãŒä½œæˆã•ã‚ŒãŸã‹
# - ãƒ«ãƒ¼ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ›´æ–°ã•ã‚ŒãŸã‹
```

---

### ã‚¹ãƒ†ãƒƒãƒ—6: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°ï¼ˆ30åˆ†ï¼‰

#### 6.1 README.mdæ›´æ–°

```markdown
## CI/CDçµ±åˆ

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯GitHub Actionsã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚

### ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

- **Validate Skills** - ã™ã¹ã¦ã®Push/PRã§Skillsæ§‹é€ ã‚’æ¤œè¨¼
- **Claude Interactive** - `@claude`ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã§å¯¾è©±çš„ãƒ¬ãƒ“ãƒ¥ãƒ¼
- **Smart Review PR** - PRã‚ªãƒ¼ãƒ—ãƒ³æ™‚ã«è‡ªå‹•ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- **Update BugSearch3** - æœˆæ¬¡ã§ãƒ«ãƒ¼ãƒ«æ›´æ–°ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

è©³ç´°ã¯ [docs/github-actions-integration-plan.md](docs/github-actions-integration-plan.md) ã‚’å‚ç…§ã€‚
```

#### 6.2 INSTALL.mdæ›´æ–°

ã€ŒCI/CDçµ±åˆã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ï¼ˆæ—¢å­˜ã®Q&Aã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®å¾Œï¼‰:

```markdown
## CI/CDçµ±åˆ

### GitHub Actionsã§ã®ä½¿ç”¨

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯GitHub Actionsã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚

è©³ç´°ãªå®Ÿè£…æ‰‹é †ã¯ [docs/github-actions-integration-plan.md](docs/github-actions-integration-plan.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### ã‚¯ã‚¤ãƒƒã‚¯ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

1. Anthropic API Keyã‚’å–å¾—
2. GitHubã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã« `ANTHROPIC_API_KEY` ã‚’è¿½åŠ 
3. `.github/workflows/validate.yml` ã‚’ä½œæˆï¼ˆãƒ•ã‚§ãƒ¼ã‚º1ï¼‰
4. GitHubã‚¢ãƒ—ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆãƒ•ã‚§ãƒ¼ã‚º2ï¼‰

### ä½¿ç”¨æ–¹æ³•

- **è‡ªå‹•æ¤œè¨¼**: ã™ã¹ã¦ã®Push/PRã§è‡ªå‹•å®Ÿè¡Œ
- **å¯¾è©±çš„ãƒ¬ãƒ“ãƒ¥ãƒ¼**: PRã‚³ãƒ¡ãƒ³ãƒˆã§ `@claude ã“ã®PRã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦`
```

#### 6.3 ãƒãƒƒã‚¸è¿½åŠ ï¼ˆREADME.mdå†’é ­ï¼‰

```markdown
# Smart Review System

[![Validate Skills](https://github.com/KEIEI-NET/smart-review-Skills_Version/workflows/Validate%20Skills/badge.svg)](https://github.com/KEIEI-NET/smart-review-Skills_Version/actions)
```

---

## æ¨å¥¨å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³

### ãƒ‘ã‚¿ãƒ¼ãƒ³A: æœ€å°æ§‹æˆï¼ˆå³åº§ã«é–‹å§‹å¯èƒ½ï¼‰

**å¯¾è±¡:** ã™ã¹ã¦ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

**ãƒ•ã‚§ãƒ¼ã‚º:** 1ã®ã¿

**å·¥æ•°:** 1æ™‚é–“

**ã‚³ã‚¹ãƒˆ:** $0

**å†…å®¹:**
- Skillsæ§‹é€ æ¤œè¨¼
- ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒã‚§ãƒƒã‚¯
- JSONæ§‹æ–‡ãƒã‚§ãƒƒã‚¯

**ãƒ¡ãƒªãƒƒãƒˆ:**
- ã‚³ã‚¹ãƒˆç„¡æ–™
- å“è³ªä¿è¨¼ã®åŸºç›¤ç¢ºç«‹
- ä»Šå¾Œã®æ‹¡å¼µã®åœŸå°

---

### ãƒ‘ã‚¿ãƒ¼ãƒ³B: å®Ÿç”¨æ§‹æˆï¼ˆæ¨å¥¨ï¼‰

**å¯¾è±¡:** ä¸­è¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€ã‚³ã‚¹ãƒˆæ„è­˜çš„

**ãƒ•ã‚§ãƒ¼ã‚º:** 1 + 2

**å·¥æ•°:** 1.5æ™‚é–“

**ã‚³ã‚¹ãƒˆ:** $2.50-10.00/æœˆ

**å†…å®¹:**
- ãƒ‘ã‚¿ãƒ¼ãƒ³Aã®å†…å®¹
- ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆ`@claude`ï¼‰

**ãƒ¡ãƒªãƒƒãƒˆ:**
- å¿…è¦ãªæ™‚ã ã‘ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Ÿè¡Œï¼ˆã‚³ã‚¹ãƒˆåŠ¹ç‡çš„ï¼‰
- æŸ”è»Ÿãªãƒ¬ãƒ“ãƒ¥ãƒ¼å¯¾è±¡æŒ‡å®š
- å¯¾è©±çš„ãªæ”¹å–„ææ¡ˆ

---

### ãƒ‘ã‚¿ãƒ¼ãƒ³C: ãƒ•ãƒ«è‡ªå‹•åŒ–æ§‹æˆ

**å¯¾è±¡:** å¤§è¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€å“è³ªæœ€å„ªå…ˆ

**ãƒ•ã‚§ãƒ¼ã‚º:** 1 + 2 + 3 + 4

**å·¥æ•°:** 3-5æ™‚é–“

**ã‚³ã‚¹ãƒˆ:** $15.00-40.00/æœˆ

**å†…å®¹:**
- ãƒ‘ã‚¿ãƒ¼ãƒ³Bã®å†…å®¹
- PRè‡ªå‹•ãƒ¬ãƒ“ãƒ¥ãƒ¼
- BugSearch3å®šæœŸæ›´æ–°

**ãƒ¡ãƒªãƒƒãƒˆ:**
- å®Œå…¨è‡ªå‹•åŒ–
- ä¸€è²«ã—ãŸãƒ¬ãƒ“ãƒ¥ãƒ¼å“è³ª
- æœ€æ–°ãƒ«ãƒ¼ãƒ«ã®è‡ªå‹•åæ˜ 

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### Q1. SkillsãŒèªè­˜ã•ã‚Œãªã„

**ç—‡çŠ¶**: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œæ™‚ã«ã€ŒSkill not foundã€ã‚¨ãƒ©ãƒ¼

**è§£æ±ºç­–**:

```yaml
# Skillsã‚’æ˜ç¤ºçš„ã«ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚³ãƒ”ãƒ¼
- name: Install Skills globally
  run: |
    mkdir -p ~/.claude/skills
    cp -r .claude/skills/* ~/.claude/skills/
    ls -la ~/.claude/skills/  # ç¢ºèª
```

---

### Q2. APIã‚­ãƒ¼ã‚¨ãƒ©ãƒ¼

**ç—‡çŠ¶**: "Invalid API key" ã¾ãŸã¯ "Unauthorized"

**è§£æ±ºç­–**:

1. ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
   ```bash
   # Settings â†’ Secrets and variables â†’ Actions
   # ANTHROPIC_API_KEY ãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèª
   ```

2. APIã‚­ãƒ¼ã®æœ‰åŠ¹æ€§ã‚’ç¢ºèª
   ```bash
   curl https://api.anthropic.com/v1/messages \
     -H "x-api-key: YOUR_API_KEY" \
     -H "anthropic-version: 2023-06-01"
   ```

3. ã‚­ãƒ¼ã‚’å†ç”Ÿæˆã—ã¦å†è¨­å®š

---

### Q3. PRã‚³ãƒ¡ãƒ³ãƒˆã§ClaudeãŒåå¿œã—ãªã„

**ç—‡çŠ¶**: `@claude`ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã—ã¦ã‚‚ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒèµ·å‹•ã—ãªã„

**åŸå› ã¨è§£æ±ºç­–**:

1. **ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ãªã„**
   ```bash
   ls -la .github/workflows/claude-interactive.yml
   ```

2. **GitHubã‚¢ãƒ—ãƒªãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã„**
   ```bash
   # https://github.com/apps/claude ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
   ```

3. **æ¡ä»¶å¼ã®ãƒŸã‚¹**
   ```yaml
   # æ­£ã—ã„æ¡ä»¶å¼ã‚’ç¢ºèª
   if: contains(github.event.comment.body, '@claude')
   ```

---

### Q4. BugSearch3æ›´æ–°ãŒå¤±æ•—ã™ã‚‹

**ç—‡çŠ¶**: "Repository not found" ã¾ãŸã¯å¤‰æ›ã‚¨ãƒ©ãƒ¼

**è§£æ±ºç­–**:

1. **BugSearch3ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ç¢ºèª**
   ```bash
   git clone https://github.com/KEIEI-NET/BugSearch3.git
   # Privateãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆã€Personal Access Tokenå¿…è¦
   ```

2. **å¤‰æ›ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ãƒ‘ã‚¹ç¢ºèª**
   ```bash
   ls -la tools/convert-yaml-simple.py
   # ã¾ãŸã¯
   ls -la tools/convert-bugsearch3-rules.ps1
   ```

3. **ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
   ```yaml
   - name: Install dependencies
     run: pip install pyyaml
   ```

---

### Q5. ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œæ™‚é–“ãŒé•·ã™ãã‚‹

**ç—‡çŠ¶**: 1ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«10åˆ†ä»¥ä¸Šã‹ã‹ã‚‹

**è§£æ±ºç­–**:

1. **`--max-turns`åˆ¶é™ã‚’è¿½åŠ **
   ```yaml
   claude_args: "--max-turns 3"
   ```

2. **å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ã‚’çµã‚‹**
   ```yaml
   on:
     pull_request:
       paths:
         - 'src/**/*.js'
         - 'src/**/*.ts'
   ```

3. **Skillã‚’æ®µéšçš„ã«å®Ÿè¡Œ**
   ```yaml
   # Security Skillã®ã¿å®Ÿè¡Œ
   prompt: "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åˆ†æã®ã¿ãŠé¡˜ã„ã—ã¾ã™"
   ```

---

## å‚è€ƒè³‡æ–™

### å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [Claude Code - GitHub Actions Integration](https://docs.claude.com/en/docs/claude-code/github-actions)
- [Anthropic API Documentation](https://docs.anthropic.com/)
- [GitHub Actions Documentation](https://docs.github.com/en/actions)

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [TODO.md](../TODO.md) - CI/CDçµ±åˆã‚¿ã‚¹ã‚¯
- [COMPATIBILITY.md](../COMPATIBILITY.md) - Validate Skillsä¾‹
- [docs/BUGSEARCH3-INTEGRATION-GUIDE.md](./BUGSEARCH3-INTEGRATION-GUIDE.md) - ãƒ«ãƒ¼ãƒ«æ›´æ–°ä¾‹

### å¤–éƒ¨ãƒªã‚½ãƒ¼ã‚¹

- [anthropics/claude-code-action](https://github.com/anthropics/claude-code-action) - å…¬å¼ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
- [GitHub Apps - Claude](https://github.com/apps/claude) - GitHubã‚¢ãƒ—ãƒª

---

## æ›´æ–°å±¥æ­´

| ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | æ—¥ä»˜ | å¤‰æ›´å†…å®¹ | ä½œæˆè€… |
|-----------|------|---------|-------|
| 1.0.0 | 2025-11-18 | åˆç‰ˆä½œæˆ | KENJI OYAMA |

---

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ãƒ»è‘—ä½œæ¨©

**è‘—ä½œæ¨©:** (c) 2025 KEIEI.NET INC.
**ä½œæˆè€…:** KENJI OYAMA
**ãƒ©ã‚¤ã‚»ãƒ³ã‚¹:** MIT Licenseï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã®LICENSEãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§ï¼‰

---

**æ³¨æ„äº‹é …:**
- ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯è¨ˆç”»æ®µéšã®ã‚‚ã®ã§ã‚ã‚Šã€å®Ÿè£…ã¯æœªå®Œäº†ã§ã™
- å®Ÿè£…æ™‚ã¯æœ€æ–°ã®Claude Code CLIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç¢ºèªã—ã¦ãã ã•ã„
- APIæ–™é‡‘ã‚„GitHub Actionsæ–™é‡‘ã¯å¤‰æ›´ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™
- å®Ÿè£…å‰ã«ãƒ†ã‚¹ãƒˆç’°å¢ƒã§ã®æ¤œè¨¼ã‚’æ¨å¥¨ã—ã¾ã™

**è³ªå•ãƒ»ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯:**
- Issues: https://github.com/KEIEI-NET/smart-review-Skills_Version/issues
- Discussions: https://github.com/KEIEI-NET/smart-review-Skills_Version/discussions
